#!/gsc/bin/perl

use strict;
use warnings;
use above "Genome";
use File::Path;
use Test::More tests => 5;

$ENV{UR_DBI_NO_COMMIT} = 1;
$ENV{UR_USE_DUMMY_AUTOGENERATED_IDS} = 1;

my $test_dir = "/tmp/test_confirm_queues_$ENV{USER}/";
use_ok ('Genome::Model::Command::Build::CombineVariants::ConfirmQueues');

# TODO: replace this model and build with mock objects or something better... but for now...
my $genes = 'EGFR,KIT';
my $pp = Genome::ProcessingProfile::CombineVariants->create(name => "test-combine-variants", limit_genes_to => $genes);
ok ($pp, "Created test processing profile"); 
my $model = Genome::Model::CombineVariants->create(processing_profile_id => $pp->id, subject_type => 'sample_group', data_directory => $test_dir);
ok ($model, "Created test model");

ok(my $dump = Genome::Model::Command::Build::CombineVariants::ConfirmQueues->create
    (model_id => $model->id), 'Created ConfirmQueues object');
isa_ok($dump, 'Genome::Model::Command::Build::CombineVariants::ConfirmQueues'); 

# Clean up
rmtree $test_dir;

#TODO how do we test this better?
