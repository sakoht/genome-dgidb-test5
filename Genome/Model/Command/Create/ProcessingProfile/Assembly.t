#!/gsc/bin/perl

use strict;
use warnings;

use above "Genome";
use Test::More tests => 6;

$ENV{UR_DBI_NO_COMMIT} = 1;
$ENV{UR_USE_DUMMY_AUTOGENERATED_IDS} = 1;

my $pp_name = 'testing';
my $create_pp_command = Genome::Model::Command::Create::ProcessingProfile::Assembly->create(
                                                                                            profile_name		   => $pp_name, 
                                                                                            bare_args => [],   
 );

isa_ok($create_pp_command,'Genome::Model::Command::Create::ProcessingProfile::Assembly');
ok($create_pp_command->execute(), 'execute processing profile create');

# Get it and make sure there is one
my @processing_profiles = Genome::ProcessingProfile::Assembly->get(name => $pp_name);
is(scalar(@processing_profiles),1,'expected one processing profile');

# check the type
my $pp = $processing_profiles[0];
isa_ok($pp ,'Genome::ProcessingProfile::Assembly');

# check accessors
is($pp->name,$pp_name,'name accessor');
is($pp->type_name,'assembly','type name accessor');

exit;
