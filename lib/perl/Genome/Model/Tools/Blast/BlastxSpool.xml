
<workflow name="Blastx Spool" executor="Workflow::Executor::SerialDeferred" logDir="/gsc/var/tmp/mcallawa">

  <!-- edges are links -->

  <link fromOperation="input connector"         fromProperty="fasta"        toOperation="batch fasta"           toProperty="fasta"      />
  <link fromOperation="input connector"         fromProperty="configfile"   toOperation="lsfspool"              toProperty="configfile"    />
  <link fromOperation="batch fasta"             fromProperty="spooldir"     toOperation="lsfspool"              toProperty="spooldir"   />
  <link fromOperation="lsfspool"                fromProperty="spooldir"     toOperation="output connector"      toProperty="spooldir"   />
  <link fromOperation="lsfspool"                fromProperty="result"       toOperation="output connector"      toProperty="result"   />

<!--
  <link fromOperation="blastx spool"            fromProperty="spooldir"     toOperation="spool post processing"   toProperty="spooldir"      />
  <link fromOperation="spool post processing"   fromProperty="spooldir"     toOperation="assemble output"         toProperty="spooldir"      />
  <link fromOperation="assemble output"         fromProperty="spooldir"     toOperation="process fasta file" toProperty="output file"   />
-->

  <operation name="batch fasta">
    <operationtype commandClass="Genome::Model::Tools::Fasta::FastaToSpool" typeClass="Workflow::OperationType::Command" />
  </operation>

  <operation name="lsfspool">
    <operationtype commandClass="Genome::Model::Tools::LSFSpool" typeClass="Workflow::OperationType::Command" />
  </operation>

<!--
  <operation name="spool post processing">
    <operationtype commandClass="Workflow::Test::Command::Sleep" typeClass="Workflow::OperationType::Command" />
  </operation>

  <operation name="assemble output">
    <operationtype commandClass="Workflow::Test::Command::Sleep" typeClass="Workflow::OperationType::Command" />
  </operation>
write stub command classes with the right properties
-->

  <operationtype typeClass="Workflow::OperationType::Model">
    <inputproperty>fasta</inputproperty>
    <inputproperty>configfile</inputproperty>
    <outputproperty>spooldir</outputproperty>
    <outputproperty>result</outputproperty>
  </operationtype>

</workflow>
