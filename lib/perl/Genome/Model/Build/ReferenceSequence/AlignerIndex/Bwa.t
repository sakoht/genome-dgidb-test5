use strict;
use warnings;

use File::Path;
use Test::More;
use Sys::Hostname;

use above 'Genome';

BEGIN {
    if (`uname -a` =~ /x86_64/) {
        plan tests => 3;
    } else {
        plan skip_all => 'Must run on a 64 bit machine';
    }
    $ENV{UR_USE_DUMMY_AUTOGENERATED_IDS} = 1;
    $ENV{UR_DBI_NO_COMMIT} = 1;
}


my $aligner_name = "bwa";
my $aligner_version = "0.5.9";
my $aligner_params = "-q 5 -t 4";


my $reference_model = Genome::Model::ImportedReferenceSequence->get(name => 'TEST-human');
ok($reference_model, "got reference model");

my $reference_build = $reference_model->build_by_version('1');
ok($reference_build, "got reference build");

my $index = Genome::Model::Build::ReferenceSequence::AlignerIndex->create(aligner_name=>$aligner_name,
                                                            aligner_version=>$aligner_version,
                                                            aligner_params=>$aligner_params,
                                                            reference_build => $reference_build);

ok($index, "created index");
