#!/usr/bin/env perl
use strict;
use warnings;

BEGIN {
    $ENV{UR_DBI_NO_COMMIT} = 1;
    $ENV{UR_USE_DUMMY_AUTOGENERATED_IDS} = 1;
};

use above 'Genome';
use Test::More;

my $ftp_url = "https://gscweb/gscmnt/ams1102/info/test_suite_data/Genome-Model-RnaSeq-DetectFusionsResult-ChimerascanResult-Index/[REF]";
my $data_dir = "/gscmnt/ams1102/info/test_suite_data/Genome-Model-RnaSeq-DetectFusionsResult-ChimerascanResult-Index";

#my $reference_build = Genome::Model::Build::ImportedReferenceSequence->get(name => "GRCh37-lite-build37");

my $reference_model = Genome::Model::ImportedReferenceSequence->create(
    name => 'chr1 test model',
    subject => Genome::Taxon->get(name => 'human'),
    processing_profile => Genome::ProcessingProfile->get(name => 'chromosome-fastas'),
);

my $reference_build = Genome::Model::Build::ImportedReferenceSequence->create(
    model => $reference_model,
    fasta_file => $data_dir . "/all_sequences.fa",
    data_directory => $data_dir,
    version => '37'
);

my $result = Genome::Model::RnaSeq::DetectFusionsResult::ChimerascanResult::Index->get_or_create(
    version => "0.4.3",
    bowtie_version => "0.12.5",
    reference_build => $reference_build,
    ftp_server => $ftp_url
);

isa_ok($result, "Genome::Model::RnaSeq::DetectFusionsResult::ChimerascanResult::Index");

done_testing();

