<?xml version='1.0' standalone='yes'?>

<workflow name="Somatic Variant Validation Pipeline" logDir="/gsc/var/log/genome/somatic_variant_validation">

  <link fromOperation="input connector" fromProperty="build_id" toOperation="Detect Variants" toProperty="build_id" />

  <link fromOperation="input connector" fromProperty="variant_list" toOperation="Bed to Annotation" toProperty="snv_file" />
  <link fromOperation="input connector" fromProperty="snv_list_file" toOperation="Bed to Annotation" toProperty="output" />

  <link fromOperation="Detect Variants" fromProperty="hq_snv_file" toOperation="Varscan Process-Validation" toProperty="filtered_validation_file"/>
  <link fromOperation="Detect Variants" fromProperty="build_id" toOperation="Varscan Process-Validation" toProperty="build_id" />

  <link fromOperation="Bed to Annotation" fromProperty="output" toOperation="Varscan Process-Validation" toProperty="variants_file" />
  <link fromOperation="input connector" fromProperty="targeted_snv_validation" toOperation="Varscan Process-Validation" toProperty="output_file" />
  <link fromOperation="input connector" fromProperty="minimum_coverage" toOperation="Varscan Process-Validation" toProperty="min_coverage" />
  <link fromOperation="input connector" fromProperty="output_plot" toOperation="Varscan Process-Validation" toProperty="output_plot" />

  <link fromOperation="Varscan Process-Validation" fromProperty="output_file" toOperation="output connector" toProperty="targeted_snv_validation_output" />

  <operation name="Detect Variants">
    <operationtype commandClass="Genome::Model::SomaticValidation::Command::DetectVariants" typeClass="Workflow::OperationType::Command" />
  </operation>

  <operation name="Bed to Annotation">
    <operationtype commandClass="Genome::Model::Tools::Bed::Convert::BedToAnnotation" typeClass="Workflow::OperationType::Command" />
  </operation>

  <operation name="Varscan Process-Validation">
    <operationtype commandClass="Genome::Model::SomaticValidation::Command::ProcessValidation" typeClass="Workflow::OperationType::Command" />
  </operation>

  <operationtype typeClass="Workflow::OperationType::Model">
    <inputproperty>variant_list</inputproperty>
    <inputproperty>snv_list_file</inputproperty>
    <inputproperty>build_id</inputproperty>
    <inputproperty>output_plot</inputproperty>
    <inputproperty>targeted_snv_validation</inputproperty>
    <inputproperty>minimum_coverage</inputproperty>

    <outputproperty>targeted_snv_validation_output</outputproperty>
  </operationtype>

</workflow>
