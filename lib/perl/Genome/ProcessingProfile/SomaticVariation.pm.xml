<?xml version='1.0' standalone='yes'?>

<workflow name="Somatic Variation Pipeline" logDir="/gsc/var/log/genome/somatic_variation_pipeline">

  <link fromOperation="input connector" fromProperty="build_id" toOperation="Detect Variants" toProperty="build_id" />

  <link fromOperation="Detect Variants" fromProperty="build_id" toOperation="Identify LOH" toProperty="build_id" />

  <link fromOperation="Identify LOH" fromProperty="build_id" toOperation="Identify Previously Discovered Variations" toProperty="build_id" />

  <link fromOperation="Identify Previously Discovered Variations" fromProperty="build_id" toOperation="Tier Variants" toProperty="build_id" />
 
  <link fromOperation="Tier Variants" fromProperty="build_id" toOperation="Annotate And Upload Variants" toProperty="build_id" />
  
  <link fromOperation="input connector" fromProperty="annotator_version" toOperation="Annotate And Upload Variants" toProperty="annotator_version" />
  
  <link fromOperation="Annotate And Upload Variants" fromProperty="build_id" toOperation="output connector" toProperty="build_id" />

  <operation name="Detect Variants">
    <operationtype commandClass="Genome::Model::SomaticVariation::Command::DetectVariants" typeClass="Workflow::OperationType::Command" />
  </operation>

  <operation name="Identify LOH">
    <operationtype commandClass="Genome::Model::SomaticVariation::Command::Loh" typeClass="Workflow::OperationType::Command" />
  </operation>

  <operation name="Identify Previously Discovered Variations">
    <operationtype commandClass="Genome::Model::SomaticVariation::Command::IdentifyPreviouslyDiscoveredVariations" typeClass="Workflow::OperationType::Command" />
  </operation>

  <operation name="Tier Variants">
    <operationtype commandClass="Genome::Model::SomaticVariation::Command::TierVariants" typeClass="Workflow::OperationType::Command" />
  </operation>
  
  <operation name="Annotate And Upload Variants">
    <operationtype commandClass="Genome::Model::SomaticVariation::Command::AnnotateAndUploadVariants" typeClass="Workflow::OperationType::Command" />
  </operation>

  <operationtype typeClass="Workflow::OperationType::Model">
    <inputproperty>build_id</inputproperty>
    <inputproperty>annotator_version</inputproperty>
    <outputproperty>build_id</outputproperty>
  </operationtype>

</workflow>
