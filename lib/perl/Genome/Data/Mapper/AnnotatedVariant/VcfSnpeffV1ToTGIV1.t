#!/gsc/bin/perl

BEGIN { 
    $ENV{UR_DBI_NO_COMMIT} = 1;
    $ENV{UR_USE_DUMMY_AUTOGENERATED_IDS} = 1;
}

use strict;
use warnings;

use above "Genome";
use Test::More;

use_ok('Genome::Data::Mapper::AnnotatedVariant::VcfSnpeffV1ToTGIV1') or die;

#Test create

my $obj = eval {
    Genome::Data::Mapper::AnnotatedVariant::VcfSnpeffV1ToTGIV1->create()
};

my $error = $@;
print "$error\n";

ok($obj, 'created object successfully');
ok($obj->isa('Genome::Data::Mapper::AnnotatedVariant::VcfSnpeffV1ToTGIV1'), 'object is a Genome::Data::Mapper::AnnotatedVariant::VcfSnpeffV1ToTGIV1');
ok($obj->isa('Genome::Data::Mapper::AnnotatedVariant'), 'object is a Genome::Data::Mapper::AnnotatedVariant');

#TODO test calculate_annotation_field and calculate_transcript_annotation_field

#use Genome::Data::Converter;
#my $mapper = Genome::Data::Mapper::AnnotatedVariant::VcfSnpeffV1ToTGIV1->create();
#ok($mapper, 'created mapper successfully');
#my $converter = Genome::Data::Converter->create(from_format=>'Snpeff',
#    from_file => "/tmp/dbSnpFiltered2.snpeff.vcf.noHeader",
#    to_format => 'Tgi',
#    to_file => "/tmp/dbSnpFiltered2.snpeff.vcf.tgi",
#    mapper => $mapper,
#);

#$converter->convert_all();

done_testing();
